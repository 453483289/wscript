<!doctype html>
<html>
<head>
<title>WScript</title>
<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
<style>
body,
textarea {
    background: #222;
    color: #ccc;
    font-family: 'Roboto Mono', monospace;
}

div {
    width: 49%;
    height: 600px;
    float: left;
    position: relative;
}

div:after {
    color: #ccc;
    position: absolute;
    right: 1em;
    top: 0;
}

div#console:after {
    content: 'Console';
}

div#vfs {
    float: right;
}

div#vfs:after {
    content: 'VFS';
}

textarea {
    width: 100%;
    height: 100%;
}
</style>
</head>
<body>
<div id="console"><textarea id="console-output"></textarea></div>
<div id="vfs"><textarea id="vfs-output"></textarea></div>
<script>
console._log = console.log;
console.log = function() {
    if (arguments) {
        [...arguments].map(l => {
            window['console-output'].value += typeof l === 'string' ? l : JSON.stringify(l, false, 2);
            window['console-output'].value += '\n';
        });
    }
}

// Overwrite JS objects
const nop = () => {};
window.fetch = window.XMLHttpRequest = nop;
</script>
<script src="WScript.js"></script>
<script src="../examples/malwareExample.js"></script>
<script>
if (window.WScript && window.VFS) {
    window.setInterval(() => {
        window['vfs-output'].value = VFS._printVFS();
    }, 100);
}
</script>
</body>
</html>